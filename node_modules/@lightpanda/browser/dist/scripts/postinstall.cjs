var e=Object.create,o=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.getPrototypeOf,n=Object.prototype.hasOwnProperty,i=(i,s,c)=>(c=null!=i?e(a(i)):{},((e,a,i,s)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let c of r(a))n.call(e,c)||c===i||o(e,c,{get:()=>a[c],enumerable:!(s=t(a,c))||s.enumerable});return e})(!s&&i&&i.__esModule?c:o(c,"default",{value:i,enumerable:!0}),i)),s=require("fs"),c=i(require("https"),1),l=require("process"),d=`${i(require("os"),1).default.homedir()}/.cache/lightpanda-node`,p=process.env.LIGHTPANDA_EXECUTABLE_PATH,u=`${d}/lightpanda`,f={darwin:{x64:"x86_64-macos",arm64:"aarch64-macos"},linux:{x64:"x86_64-linux",arm64:"aarch64-linux"}};(async()=>{const e=f?.[l.platform]?.[l.arch];(0,s.existsSync)(d)||(0,s.mkdirSync)(d,{recursive:!0});const o=(e,t,r)=>{const a=(0,s.createWriteStream)(u);c.default.get(e,e=>{if(e.headers.location&&(301===e.statusCode||302===e.statusCode||307===e.statusCode))return o(e.headers.location,t,r);e.pipe(a).on("finish",()=>{t()}).on("error",e=>{r(e)})})};if(e){p&&(console.info("$LIGHTPANDA_EXECUTABLE_PATH found, skipping binary download…"),(0,l.exit)(0));try{console.info("⏳ Downloading latest version of Lightpanda browser…"),await(async e=>new Promise((t,r)=>o(e,t,r)))(`https://github.com/lightpanda-io/browser/releases/download/nightly/lightpanda-${e}`),(0,s.chmodSync)(u,s.constants.S_IRWXU),console.info("✅ Done!"),(0,l.exit)(0)}catch(o){console.log("error",o),console.warn(`Lightpanda's failed to download the binary file "${e}".`),(0,l.exit)(1)}}else console.warn("Lightpanda package doesn't ship with prebuilt binaries for your platform yet. "),(0,l.exit)(1)})();