model Domain {
  id                      String   @id @default(cuid())
  slug                    String   @unique
  verified                Boolean  @default(false)
  placeholder             String?
  expiredUrl              String?  @db.Text
  notFoundUrl             String?  @db.Text
  primary                 Boolean  @default(false)
  archived                Boolean  @default(false)
  lastChecked             DateTime @default(now())
  logo                    String?
  appleAppSiteAssociation Json?
  assetLinks              Json?
  deepviewData            Json?    @default("{}")

  linkRetentionDays Int? 
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  projectId        String?
  project          Project?          @relation(fields: [projectId], references: [id], onDelete: Cascade)
  registeredDomain RegisteredDomain?

  @@index(projectId)
  @@index(lastChecked(sort: Asc))
}

model RegisteredDomain {
  id                    String    @id @default(cuid())
  slug                  String
  projectId             String
  domainId              String?   @unique
  autoRenewalDisabledAt DateTime?
  renewalFee            Int       @default(1200) // $12
  expiresAt             DateTime
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  project Project @relation(fields: [projectId], references: [id])
  domain  Domain? @relation(fields: [domainId], references: [id], onDelete: SetNull)

  @@index(projectId)
  @@index(expiresAt(sort: Asc))
}

model DefaultDomains {
  id          String  @id @default(cuid())
  leadswap    Boolean @default(true) // LeadSwap default domain
  projectId   String  @unique
  project     Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
}
